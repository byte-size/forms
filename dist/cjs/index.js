"use strict";var e=require("vue"),t=require("./normalize-component-32a25b16.js");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(e);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var a=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e="undefined"!=typeof window,t="undefined"!=typeof navigator,n=e&&("ontouchstart"in window||t&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function i(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)}function a(e,t){var a=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||n,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe)}}(t.value),r=a.handler,o=a.middleware,s=a.detectIframe;if(a.isActive){if(e["__v-click-outside"]=a.events.map((function(t){return{event:t,srcTarget:document.documentElement,handler:function(t){return function(e){var t=e.el,n=e.event,a=e.handler,r=e.middleware,o=n.path||n.composedPath&&n.composedPath();(o?o.indexOf(t)<0:!t.contains(n.target))&&i({event:n,handler:a,middleware:r})}({el:e,event:t,handler:r,middleware:o})}}})),s){var c={event:"blur",srcTarget:window,handler:function(t){return function(e){var t=e.el,n=e.event,a=e.handler,r=e.middleware;setTimeout((function(){var e=document.activeElement;"IFRAME"!==e.tagName||t.contains(e)||i({event:n,handler:a,middleware:r})}),0)}({el:e,event:t,handler:r,middleware:o})}};e["__v-click-outside"]=[].concat(e["__v-click-outside"],[c])}e["__v-click-outside"].forEach((function(t){var n=t.event,i=t.srcTarget,a=t.handler;return setTimeout((function(){e["__v-click-outside"]&&i.addEventListener(n,a,!1)}),0)}))}}function r(e){(e["__v-click-outside"]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,!1)})),delete e["__v-click-outside"]}var o=e?{bind:a,update:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(r(e),a(e,{value:n}))},unbind:r}:{};return{install:function(e){e.directive("click-outside",o)},directive:o}}()}));function r(e,t,n,i,a,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}const o={name:"Notification",props:{name:{type:String,required:!0},message:{type:String,default:""}},data:function(){return{isVisible:!0}}};var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isVisible?n("div",{attrs:{"data-ntfc":e.name}},[e._v(e._s(e.message))]):e._e()};s._withStripped=!0;const c=t.normalizeComponent({render:s,staticRenderFns:[]},undefined,o,undefined,false,undefined,!1,void 0,void 0,void 0);var u={name:"Loading",data:function(){return{isAlive:!0}},props:{state:{type:String,default:"loading"}}};const l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function d(e){return(e,t)=>function(e,t){const n=l?t.media||"default":e,i=m[n]||(m[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===f&&(f=document.head||document.getElementsByTagName("head")[0]),f.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(n),a=i.element.childNodes;a[e]&&i.element.removeChild(a[e]),a.length?i.element.insertBefore(t,a[e]):i.element.appendChild(t)}}}(e,t)}let f;const m={};const v=u;var p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isAlive?n("div",{staticClass:"bs-form-loading"},["loading"===e.state?n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"100%",width:"100%"}},e._l(3,(function(e){return n("span",{key:e})})),0):"success"===e.state?n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"100%",width:"100%"}},[n("p",[e._v("✔")])]):n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"100%",width:"100%"}},[n("p",[e._v("⚠")])])]):n("i",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{name:"loading"}})};p._withStripped=!0;const h=function(e){e&&e("data-v-3df97754_0",{source:"\n@keyframes blink-data-v-3df97754 {\n0% {\n    opacity: 0.2;\n}\n20% {\n    opacity: 1;\n}\n100% {\n    opacity: 0.2;\n}\n}\nspan[data-v-3df97754] {\n  animation-name: blink-data-v-3df97754;\n  animation-duration: 1.5s;\n  animation-iteration-count: infinite;\n  animation-fill-mode: both;\n  height: 8px;\n  width: 8px;\n  background: #ddd;\n  border-radius: 999px;\n}\nspan[data-v-3df97754]:nth-child(2) {\n  padding-left: 2px;\n  animation-delay: 0.2s;\n}\nspan[data-v-3df97754]:nth-child(3) {\n  padding-left: 2px;\n  animation-delay: 0.4s;\n}\n",map:{version:3,sources:["/Users/Kemal/Desktop/Kite/_Code/bs2/bs-forms/src/Loading.vue"],names:[],mappings:";AA6BA;AACA;IACA,YAAA;AACA;AACA;IACA,UAAA;AACA;AACA;IACA,YAAA;AACA;AACA;AACA;EACA,qCAAA;EACA,wBAAA;EACA,mCAAA;EACA,yBAAA;EACA,WAAA;EACA,UAAA;EACA,gBAAA;EACA,oBAAA;AACA;AACA;EACA,iBAAA;EACA,qBAAA;AACA;AACA;EACA,iBAAA;EACA,qBAAA;AACA",file:"Loading.vue",sourcesContent:['<template>\n  <div v-if="isAlive" class="bs-form-loading">\n    <div v-if="state === \'loading\'" style="display: flex; justify-content:center; align-items:center; height:100%; width: 100%;">\n      <span v-for="i of 3" :key="i" />\n    </div>\n    <div v-else-if="state === \'success\'" style="display: flex; justify-content:center; align-items:center; height:100%; width: 100%;"><p>✔</p></div>\n    <div v-else style="display: flex; justify-content:center; align-items:center; height:100%; width: 100%;"><p>⚠</p></div>\n  </div>\n  <i v-else v-show="false" :name="\'loading\'" />\n</template>\n\n<script>\nexport default {\n  name: \'Loading\',\n  data() {\n    return {\n      isAlive: true\n    }\n  },\n  props: {\n    state: {\n      type: String,\n      default: \'loading\'\n    }\n  }\n}\n<\/script>\n\n<style lang="postcss" scoped>\n@keyframes blink {\n  0% {\n    opacity: 0.2;\n  }\n  20% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.2;\n  }\n}\nspan {\n  animation-name: blink;\n  animation-duration: 1.5s;\n  animation-iteration-count: infinite;\n  animation-fill-mode: both;\n  height: 8px;\n  width: 8px;\n  background: #ddd;\n  border-radius: 999px;\n}\nspan:nth-child(2) {\n  padding-left: 2px;\n  animation-delay: 0.2s;\n}\nspan:nth-child(3) {\n  padding-left: 2px;\n  animation-delay: 0.4s;\n}\n</style>\n']},media:void 0})},g=t.normalizeComponent({render:p,staticRenderFns:[]},h,v,"data-v-3df97754",false,undefined,!1,d,void 0,void 0);var A=/^(?:submit|button|image|reset|file)$/i,y=/^(?:input|select|textarea|keygen)/i,b=/(\[[^\[\]]*\])/g;function w(e,t,n){if(0===t.length)return e=n;var i=t.shift(),a=i.match(/^\[(.+?)\]$/);if("[]"===i)return e=e||[],Array.isArray(e)?e.push(w(null,t,n)):(e._values=e._values||[],e._values.push(w(null,t,n))),e;if(a){var r=a[1],o=+r;isNaN(o)?(e=e||{})[r]=w(e[r],t,n):(e=e||[])[o]=w(e[o],t,n)}else e[i]=w(e[i],t,n);return e}function E(e,t,n){if(t.match(b)){w(e,function(e){var t=[],n=new RegExp(b),i=/^([^\[\]]*)/.exec(e);for(i[1]&&t.push(i[1]);null!==(i=n.exec(e));)t.push(i[1]);return t}(t),n)}else{var i=e[t];i?(Array.isArray(i)||(e[t]=[i]),e[t].push(n)):e[t]=n}return e}function k(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}var x=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",i=t.serializer||(t.hash?E:k),a=e&&e.elements?e.elements:[],r=Object.create(null),o=0;o<a.length;++o){var s=a[o];if((t.disabled||!s.disabled)&&s.name&&(y.test(s.nodeName)&&!A.test(s.type))){var c=s.name,u=s.value;if("checkbox"!==s.type&&"radio"!==s.type||s.checked||(u=void 0),t.empty){if("checkbox"!==s.type||s.checked||(u=""),"radio"===s.type&&(r[s.name]||s.checked?s.checked&&(r[s.name]=!0):r[s.name]=!1),null==u&&"radio"==s.type)continue}else if(!u)continue;if("select-multiple"!==s.type)n=i(n,c,u);else{u=[];for(var l=s.options,d=!1,f=0;f<l.length;++f){var m=l[f],v=t.empty&&!m.value,p=m.value||v;m.selected&&p&&(d=!0,n=t.hash&&"[]"!==c.slice(c.length-2)?i(n,c+"[]",m.value):i(n,c,m.value))}!d&&t.empty&&(n=i(n,c,""))}}}if(t.empty)for(var c in r)r[c]||(n=i(n,c,""));return n},C=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary"],F=C.join(","),S="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function T(e){return!(!N(e)||function(e){return function(e){return I(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}((e.form||e.ownerDocument).querySelectorAll('input[type="radio"][name="'+e.name+'"]'),e.form);return!t||t===e}(e)}(e)||q(e)<0)}function N(e){return!(e.disabled||function(e){return I(e)&&"hidden"===e.type}(e)||function(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}(e))}var _,L=C.concat("iframe").join(",");function O(e){if(!e)throw new Error("No node provided");return!1!==S.call(e,L)&&N(e)}function q(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t}function D(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function I(e){return"INPUT"===e.tagName}
/*!
* focus-trap 6.0.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/var j,$=(j=[],{activateTrap:function(e){if(j.length>0){var t=j[j.length-1];t!==e&&t.pause()}var n=j.indexOf(e);-1===n||j.splice(n,1),j.push(e)},deactivateTrap:function(e){var t=j.indexOf(e);-1!==t&&j.splice(t,1),j.length>0&&j[j.length-1].unpause()}});function B(e,t){var n=document,i="string"==typeof e?n.querySelector(e):e,a={returnFocusOnDeactivate:!0,escapeDeactivates:!0,...t},r={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},o={activate:function(e){if(r.active)return;h(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:a.onActivate;t&&t();return c(),o},deactivate:s,pause:function(){if(r.paused||!r.active)return;r.paused=!0,u()},unpause:function(){if(!r.paused||!r.active)return;r.paused=!1,h(),c()}};return o;function s(e){if(r.active){clearTimeout(_),u(),r.active=!1,r.paused=!1,$.deactivateTrap(o);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:a.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:a.returnFocusOnDeactivate)&&R((function(){var e;g((e=r.nodeFocusedBeforeActivation,l("setReturnFocus")||e))})),o}}function c(){if(r.active)return $.activateTrap(o),_=R((function(){g(d())})),n.addEventListener("focusin",m,!0),n.addEventListener("mousedown",f,{capture:!0,passive:!1}),n.addEventListener("touchstart",f,{capture:!0,passive:!1}),n.addEventListener("click",p,{capture:!0,passive:!1}),n.addEventListener("keydown",v,{capture:!0,passive:!1}),o}function u(){if(r.active)return n.removeEventListener("focusin",m,!0),n.removeEventListener("mousedown",f,!0),n.removeEventListener("touchstart",f,!0),n.removeEventListener("click",p,!0),n.removeEventListener("keydown",v,!0),o}function l(e){var t=a[e],i=t;if(!t)return null;if("string"==typeof t&&!(i=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(i=t()))throw new Error("`"+e+"` did not return a node");return i}function d(){var e;if(!(e=null!==l("initialFocus")?l("initialFocus"):i.contains(n.activeElement)?n.activeElement:r.firstTabbableNode||l("fallbackFocus")))throw new Error("Your focus-trap needs to have at least one focusable element");return e}function f(e){i.contains(e.target)||(a.clickOutsideDeactivates?s({returnFocus:!O(e.target)}):a.allowOutsideClick&&("boolean"==typeof a.allowOutsideClick?a.allowOutsideClick:a.allowOutsideClick(e))||e.preventDefault())}function m(e){i.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),g(r.mostRecentlyFocusedNode||d()))}function v(e){if(!1!==a.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void s();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(h(),e.shiftKey&&e.target===r.firstTabbableNode)return e.preventDefault(),void g(r.lastTabbableNode);if(!e.shiftKey&&e.target===r.lastTabbableNode)e.preventDefault(),g(r.firstTabbableNode)}(e)}function p(e){a.clickOutsideDeactivates||i.contains(e.target)||a.allowOutsideClick&&("boolean"==typeof a.allowOutsideClick?a.allowOutsideClick:a.allowOutsideClick(e))||(e.preventDefault(),e.stopImmediatePropagation())}function h(){var e=function(e,t){t=t||{};var n,i,a=[],r=[],o=e.querySelectorAll(F);t.includeContainer&&S.call(e,F)&&(o=Array.prototype.slice.apply(o)).unshift(e);for(var s=0;s<o.length;s++)T(n=o[s])&&(0===(i=q(n))?a.push(n):r.push({documentOrder:s,tabIndex:i,node:n}));return r.sort(D).map((function(e){return e.node})).concat(a)}(i);r.firstTabbableNode=e[0]||d(),r.lastTabbableNode=e[e.length-1]||d()}function g(e){e!==n.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!a.preventScroll}),r.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):g(d()))}}function R(e){return setTimeout(e,0)}const P={name:"FormContainer",props:{structSchema:{type:Object,required:!0},transportFunction:{type:Object,required:!0},options:{type:Object,default:function(){}}},data:function(){return{structModel:null,yupSchema:null,trap:null,isActive:!1,domForm:null,loadingElement:null}},mounted:function(){this.domForm=this.$refs.form,this.initValidatorElements(),this.initTextAreas(),this.initFocusTrap()},methods:{initTextAreas:function(){this.domForm.querySelectorAll("[data-autoresize]").forEach((function(e){e.style.boxSizing="border-box";var t=e.offsetHeight-e.clientHeight;e.addEventListener("input",(function(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px"})),e.removeAttribute("data-autoresize")}))},initFocusTrap:function(){this.trap=B(this.$refs.form,{clickOutsideDeactivates:!0})},initValidatorElements:function(){var e=this;Object.keys(this.structSchema).map((function(t){var n=e.domForm.querySelector("i[name=".concat(t,"]"));if(n){var a=n.classList.value;new(i.default.extend(c))({propsData:{name:t}}).$mount(n).$el.className=a}}))},trapFocus:function(){this.isActive||this.trap.activate(),this.isActive=!0},unTrapFocus:function(){this.isActive&&this.trap.deactivate(),this.isActive=!1},validateForm:function(){var e=this;return new Promise((function(t){var n=x(e.$refs.form,{hash:!0}),i=[];Object.keys(e.structSchema).forEach((function(t){var a=(0,e.structSchema[t])(n[t],n);!0!==a&&i.push({prop:t,value:a()})})),i.length>0&&(i.forEach((function(t){e.displayValidationErrors(t.prop,t.value)})),t({success:!1,errors:i})),t({success:!0,data:n})}))},displayValidationErrors:function(e,t){var n=this.domForm.querySelector("[data-ntfc=".concat(e,"]"));n&&(n.innerHTML=t,n.style.display="block")},clearValidationErrors:function(e){this.domForm.querySelector("[data-validation-message=".concat(e,"]")).innerHTML=""},toggleSubmitButton:function(e){this.domForm.querySelector("button[type=submit]").disabled=!e},submitForm:function(e){var t=this;e&&e.preventDefault(),!this.loadingElement||"success"!==this.loadingElement.state&&"warning"!==this.loadingElement.state&&"error"!==this.loadingElement.state?this.validateForm().then(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.success){e.next=16;break}return t.triggerLoadingState("loading"),e.prev=2,e.next=5,t.transportFunction.func(n.data);case 5:i=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),t.triggerLoadingState("error"),e.abrupt("return",t.$emit("error",e.t0));case 12:t.$bsFormsDebug&&(console.log("BS Forms Transport Function Response:"),console.log(i)),t.transportFunction.success(i)?(t.triggerLoadingState("success"),t.$emit("success",i)):(t.triggerLoadingState("error"),t.$emit("error",i)),e.next=18;break;case 16:t.triggerLoadingState("warning"),t.$emit("warning",n.errors);case 18:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,c,"next",e)}function c(e){r(o,i,a,s,c,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}()):this.reset()},triggerLoadingState:function(e){if("loading"===e){this.domForm.querySelector("button[type=submit]").setAttribute("disabled",!0);var t=this.domForm.querySelector("i[name=loading]");if(t){var n=t.classList.value,a=new(i.default.extend(g));this.loadingElement=a.$mount(t),this.loadingElement.$el.className="".concat(n," bs-form-loading")}}else{this.domForm.querySelector("button[type=submit]").removeAttribute("disabled"),this.loadingElement&&(this.loadingElement.state=e)}},reset:function(){var e=this;this.domForm.reset();var t=this.domForm.querySelectorAll("input, select, textarea"),n=new Event("input",{bubbles:!0,cancelable:!0});t.forEach((function(e){return e.dispatchEvent(n)})),this.domForm.querySelector("button[type=submit]").removeAttribute("disabled");var i=this.domForm.querySelector(".bs-form-loading").classList.value;this.loadingElement.isAlive=!1;this.domForm.querySelector("i[name=loading]");this.$nextTick((function(){e.loadingElement.$el.classList=i,e.loadingElement=null}))}}};var U=function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.unTrapFocus,expression:"unTrapFocus"}],ref:"form",on:{submit:e.submitForm,click:e.trapFocus,focus:e.trapFocus}},[e._t("default")],2)};U._withStripped=!0;const z=t.normalizeComponent({render:U,staticRenderFns:[]},undefined,P,undefined,false,undefined,!1,void 0,void 0,void 0);var V={install:function(e,t){e.use(a),e.component("bs-form",z),t.debug&&(e.prototype.$bsFormsDebug=!0)}};module.exports=V;
